<!DOCTYPE html>
<!-- Un-Minified version -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <title>FlightPlanningToolTest</title>
</head>
<body>
    </div> 
    <h1> {{ title }} </h1>
    <h1> RESULTS: </h1>

    <b1> Gross Weight :</b1>
    <b2> {{gross_weight_text}}lbs</b2>

    <br>

    <b1> Takeoff Factor : </b1>
    <b2> {{takeoff_factor_text}} </b2>

    <br>

    <b1> Runway Available : </b1>
    <b2> {{runway_avail}} feet </b2>

    <br>

    <b1> Runway Slope : </b1>
    <b2> {{ runway_slope }} degrees </b2>
    
    <br>

    <b1>{{ uncorrected_max_eff_TO_dist_text }}</b1>
    <b2>{{uncorrected_max_eff_TO_dist}} feet </b2>

    <br>

    <b1> AMAX Rotation speed : </b1>
    <b2> {{ rotation_speed_calculated }} knots </b2>

    <br>

    <b1> Uncorrected Refusal 2 Value : </b1>
    <b2> {{uncorrected_refusal_test_p2}} knots</b2>

    <br>

    <b1> Partially Correct Refusal 3 Value:</b1>
    <b2> {{ partially_corrected_refusal_p3 }} </b2>

    <br>
<!-- 
    <b1> Country airports:</b1>
    <b2> {{country_airport}} </b2> -->
    <form action="/get_data" method="GET">
        <label for="gwt">Enter Gross Weight: </label>
        <input type="text" id="gwt" name="gwt" required>
        <br>
        <label for="get_to_factor">Enter Takeoff Factor: </label>
        <input type="text" id="get_to_factor" name="get_to_factor" required>
        <br>
        <label for="get_rwy_available">Enter Runway Length: </label>
        <input type="text" id="get_rwy_available" name="get_rwy_available" required>
        <br>
        <label for="get_rwy_slope">Enter Runway slope: </label>
        <input type="text" id="get_rwy_slope" name="get_rwy_slope" required>
        <br>
        <label for="enter_db_country">Enter country: </label>
        <input type="text" id="enter_db_country" name="enter_db_country" required>
        <br>
        <button type="submit">Send</button>
    </form>

    <div id="map" style="height: 900px; width: 100%;"></div> <!-- init map -->

</html>

<script>
    // Initialize the map
    var map = L.map('map').setView([51.505, -0.09], 6);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    var smallAirportIcon = L.icon({
        iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAABgUlEQVR4nIWRzStEURjGf2ecGeZeG8zOR/wL7oaSjYXl4N5SIkqJjJ2FnWwUNiwxStlQ5zY+/gBLWZyy8bGRFBnjKyULMcfCjO6Mwbs5nZ7n97xPvWK6h3/Hc7w40AUsKa2Ogpr8HXJjIJqBMDAJtAH7wN8BruPaAjEPDAPlAekDzEGxX0z3gOd4nUAcWAdmgY6gyY7ZROwIT5dPFwbT4ms/k9dCuTcBjAGHpeD6oSS1fStY1VaTQMwE9XzACDAFPAdFq8aifjCJjEgyqXFeH18BPNdxywoClFY3Sqs54PobrrZoGFxDlkvuUgkyZ9+tqwC7uEF+rgCiVdGvzRWS++0Et6e3QU9WINo9x5OlAjZDMkRd/yrhaJiH3QnShTB8nXUP2IaiMxrMRvY923uzNdpZGaskfZoGUwCfAwvAALDzo4Gv/Xeg+yXzsp8+KYA/gJTBtCutlpVWbQaT/NEg1+MNRGPuMwpcGMyxr/3roMvXvikZYEAKWARaDWYlb/xtPgFd9n9MLLgfqAAAAABJRU5ErkJggg==', // Your base64 data here
    });

    var mediumAirportIcon = L.icon({
        iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAABfklEQVR4nIXRMUtVcRzG8c/pnqt1jkOaLZVQb+G6FIiLg6PFPdSSNARhZFtDm7QE1VJjdoWgpeEcTHsBjtFwLy0VDSFE0jXLCMEhvJ0GPXC6V+tZ/vz5Ps/DA7+AOf9TfTSZwnk8yprpmzILDwzVkmGBGqq4hTGs4N8F9VoSC9zHVfSXUEfuVbc/YE59NJnEFJ7iLibKpoHhAX1Rn81Pm6tyZ7NW+rVgh/beWVzH657wsVhj+ZT57IRoMDojcKfMi4JruI2fZRgPxRrLI8K+0I3LG7Z/bENSryWVvwqyZvola6b3sFaAaCiysDwi7A/NTn+z/mG9QIOIuxcU+gzR0cjC0ojw8G64/b5d9vwWGK+PJuF+Bc8rYcWTxZOqR6puXvneHWb3rC/xgu4z5p51djqXZi62J+Pjsfa7nvBHPMA0lnoWZK10Bxe2NrZWusIdLMqNZ830cdZMx+QavQt2V/wSOL33m8Eq3mbNdK1sy1ppvn9BIMRDnJObL4wH6Q+YX3T83b7+/AAAAABJRU5ErkJggg==', // Your base64 data here
    });

    var largeAirportIcon = L.icon({
        iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAABmJLR0QA4ADgAODYf054AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1ggQEQ8TdhjdmgAAAB10RVh0Q29tbWVudABDcmVhdGVkIHdpdGggVGhlIEdJTVDvZCVuAAABiElEQVQoz42SPUgjURSFv6dvNGIqTTatgqJYWimYuLLFNguxsNiZVhJcEjsL220srLTNFCsITrBY/GFZoqCFiG7jTxGNwmCzWkiaWInBvTYTmUmi7G0ej3vOveeddxT/UU46nwQmgWUz9/XM39NvklJOBKWGAQOYA8aAfeD9AWspp1MptQhMA+2+1jMiR/V45Un8DCSBFWAB+OQHxQZjhKNh3AP3RkRGLNu8r1eQBb4A3+o3xAY+EM+MoQ1N5a7SW3bL3/24Fu9MA/NAxU+O9keJZ+LoNk3x9wVltwwwtZZyWgNP8LldBIYAIn0RPs6Oo0Oay0KJ85/nr16ISJdlmw9+BbX6C9Dd2814NoEOaUo7ATLAP6VUwknndbMBeSNkkMjEMToMrveuOQuS8b51G9hoGCAiq9XHauH4xx9Ku1ecrJ+CBMguMAMcApsNHng+dAC/gIlABmBLRLKWbd55eVGWbUpjEkWeUKrHu80AN4IUrZx564dZtilNkygKrWAJGBWRXA34Vr0A5+eD8J8Ey48AAAAASUVORK5CYII=', // Your base64 data here
    });

    function loadAirports() {
        fetch('/fetch_airports')
            .then(response => response.json())
            .then(data => {
                data.small_airports.forEach(airport => {
                    L.marker([airport.lat, airport.lng], {icon: smallAirportIcon})
                        .addTo(map)
                        .bindPopup(`<b>${airport.name}</b> (${airport.type})`);
                });

                data.medium_airports.forEach(airport => {
                    L.marker([airport.lat, airport.lng], {icon: mediumAirportIcon})
                        .addTo(map)
                        .bindPopup(`<b>${airport.name}</b> (${airport.type})`);
                });

                data.large_airports.forEach(airport => {
                    L.marker([airport.lat, airport.lng], {icon: largeAirportIcon})
                        .addTo(map)
                        .bindPopup(`<b>${airport.name}</b> (${airport.type})`);
                });
            })
            .catch(error => console.error('Error fetching airport data:', error));
    }

    loadAirports();
</script>